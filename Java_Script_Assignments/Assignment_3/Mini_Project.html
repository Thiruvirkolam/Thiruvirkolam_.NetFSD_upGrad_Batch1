<!DOCTYPE html>
<html>
<head>
    <title>Mini Expense Tracker</title>
</head>
<body>
    <h2>Expense Tracker</h2>
    Title: <input type="text" id="title"><br><br>
    Amount: <input type="number" id="amount"><br><br>
    Date: <input type="date" id="date"><br><br>
    <button onclick="addExpense()">Add Expense</button>
    <button onclick="viewExpenses()">View Expenses</button>
    <h3>Expense List:</h3>
    <ul id="expenseList"></ul>

<script>
    let db = openDatabase("ExpenseDB", "1.0", "Expense Database", 2 * 1024 * 1024);
    db.transaction(function(tx) {
        tx.executeSql(
            "CREATE TABLE IF NOT EXISTS expenses (id INTEGER PRIMARY KEY AUTOINCREMENT, title TEXT, amount REAL, date TEXT)"
        );
    });
    function addExpense() {
        let title = document.getElementById("title").value;
        let amount = document.getElementById("amount").value;
        let date = document.getElementById("date").value;
        db.transaction(function(tx) {
            tx.executeSql(
                "INSERT INTO expenses (title, amount, date) VALUES (?, ?, ?)",
                [title, amount, date],
                function() {
                    alert("Expense Added");
                },
                function(tx, error) {
                    alert("Insert Error: " + error.message);
                }
            );
        }, function(error) {
            alert("Transaction Error: " + error.message);
        });
    }
    function viewExpenses() {
        let list = document.getElementById("expenseList");
        list.innerHTML = "";
        db.transaction(function(tx) {
            tx.executeSql(
                "SELECT * FROM expenses",
                [],
                function(tx, results) {

                    for (let i = 0; i < results.rows.length; i++) {

                        let item = results.rows.item(i);

                        let li = document.createElement("li");

                        li.innerHTML =
                            item.title + " - â‚¹" + item.amount +
                            " (" + item.date + ")" +
                            " <button onclick='deleteExpense(" + item.id + ")'>Delete</button>";

                        list.appendChild(li);
                    }
                },
                function(tx, error) {
                    alert("Select Error: " + error.message);
                }
            );

        });
    }
    function deleteExpense(id) {
        db.transaction(function(tx) {
            tx.executeSql(
                "DELETE FROM expenses WHERE id = ?",
                [id],
                function() {
                    viewExpenses();
                },
                function(tx, error) {
                    alert("Delete Error: " + error.message);
                }
            );

        });
    }
</script>
</body>
</html>